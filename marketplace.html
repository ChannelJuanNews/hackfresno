<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> KarmaApp - Marketplace</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <!-- Bulma Version 0.6.2-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css" integrity="sha256-2k1KVsNPRXxZOsXQ8aqcZ9GOOwmJTMoOB5o5Qp1d6/s=" crossorigin="anonymous" />
  <style type="text/css">
    html,body {
      font-family: 'Open Sans';
    }
  </style>
</head>
    <body>

        <section class="hero is-fullheight is-default is-bold">
        <div class="hero-head">
          <nav class="navbar">
            <div class="container">
              <div class="navbar-brand">
                <a class="navbar-item" href="../">
                  <h1>KarmaApp</h1>
                </a>
                <span class="navbar-burger burger" data-target="navbarMenu">
                  <span></span>
                  <span></span>
                  <span></span>
                </span>
              </div>
              <div id="navbarMenu" class="navbar-menu">
       <div class="navbar-end"><div class="tabs is-right">
        <ul>
          <li ><a href="/">Home</a></li>
          <li class="is-active" ><a href="/marketplace">Marketplace</a></li>
          <li><a id="username-top" href="#"></a></li>
          <li><span class="tag is-success" id="tag-karma"></span></li>
        </ul>
      </div>
                </div>
              </div>
            </div>
          </nav>
        </div>


    <div class="hero-body">

        <div class="container">
            <div class="column is-12">


                <h1 class="title has-text-centered">Spend Your Karma</h1>

                <section class="info-tiles has-text-centered">
                  <div class="tile is-ancestor has-text-centered">
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">439k</p>
                        <p class="subtitle">Massage</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">59k</p>
                        <p class="subtitle">Hug</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">3.4k</p>
                        <p class="subtitle">Back Rub</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">19</p>
                        <p class="subtitle">Exceptions</p>
                      </article>
                    </div>
                  </div>
                </section>


                <section class="info-tiles has-text-centered">
                  <div class="tile is-ancestor has-text-centered">
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">439k</p>
                        <p class="subtitle">Users</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">59k</p>
                        <p class="subtitle">Products</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">3.4k</p>
                        <p class="subtitle">Open Orders</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">19</p>
                        <p class="subtitle">Exceptions</p>
                      </article>
                    </div>
                  </div>
                </section>



                <section class="info-tiles has-text-centered">
                  <div class="tile is-ancestor has-text-centered">
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">439k</p>
                        <p class="subtitle">Users</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">59k</p>
                        <p class="subtitle">Products</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">3.4k</p>
                        <p class="subtitle">Open Orders</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">19</p>
                        <p class="subtitle">Exceptions</p>
                      </article>
                    </div>
                  </div>
                </section>

                <section class="info-tiles has-text-centered">
                  <div class="tile is-ancestor has-text-centered">
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">439k</p>
                        <p class="subtitle">Users</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">59k</p>
                        <p class="subtitle">Products</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">3.4k</p>
                        <p class="subtitle">Open Orders</p>
                      </article>
                    </div>
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <p class="title">19</p>
                        <p class="subtitle">Exceptions</p>
                      </article>
                    </div>
                  </div>
                </section>



            </div>
                <br />
                <br />
                <br />
                <br />
                <br />
        </div>

    </div>
    </section>


    <style media="screen">
        .box:hover{
             background-color: #00E5EE;
        }
    </style>


    <script type="text/javascript">
        window.onload = function(){
            storage = window.localStorage;
            let username = storage.getItem('username')
            let tabusername = document.getElementById("username-top")
            tabusername.innerHTML = username


            let currentkarma = document.getElementById('tag-karma')

            function getOwnKarma(){
                fetch('/ownkarma', {
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    method: 'post',
                    body : JSON.stringify({
                        username    : storage.getItem('username')
                    })

                }).then(function(response){
                    return response.json()
                }).then(function(data){
                    // handle data here
                    console.log(data)
                    currentkarma.innerHTML = data.karma
                })
            }

            function spendKarma(){
                fetch('/spendkarma', {

                }).then(function(response){
                    return response.json()
                }).then(function(data){
                    // update amount of karma on front end
                })

            }





            getOwnKarma()

            var burger = document.querySelector('.burger');
            var menu = document.querySelector('#'+burger.dataset.target);
            burger.addEventListener('click', function() {
                burger.classList.toggle('is-active');
                menu.classList.toggle('is-active');
            })



        }
    </script>



    </body>
</html>
